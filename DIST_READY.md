# ‚úÖ –ü–∞–ø–∫–∞ dist –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é!

## üéâ –ò—Ç–æ–≥–∏

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Å –±–∏–ª–¥–æ–º —Ä–µ—à–µ–Ω–∞** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `@types/nodemailer`  
‚úÖ **–ù–∞—Å—Ç—Ä–æ–µ–Ω standalone —Ä–µ–∂–∏–º** - –≤ `next.config.ts`  
‚úÖ **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏** - `scripts/prepare-deploy.sh`  
‚úÖ **–ü–∞–ø–∫–∞ dist —Å–æ–∑–¥–∞–Ω–∞** - —Ä–∞–∑–º–µ—Ä **78 MB**  
‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ** - —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ HTTP 200 OK  

---

## üì¶ –ß—Ç–æ –≤ –ø–∞–ø–∫–µ dist?

```
dist/                           78 MB
‚îú‚îÄ‚îÄ server.js                   # Next.js —Å–µ—Ä–≤–µ—Ä (6.3 KB)
‚îú‚îÄ‚îÄ package.json                # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
‚îú‚îÄ‚îÄ node_modules/               # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (~50 MB)
‚îú‚îÄ‚îÄ .next/                      # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ server/                # –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ API routes
‚îÇ   ‚îî‚îÄ‚îÄ static/                # CSS, JS, chunks
‚îú‚îÄ‚îÄ public/                     # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã (~20 MB)
‚îÇ   ‚îú‚îÄ‚îÄ images/                # –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico
‚îú‚îÄ‚îÄ start.sh                    # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ DEPLOY_README.md            # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
```

---

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É dist

```bash
source setup-dev.sh
npm run build:deploy
```

–≠—Ç–∞ –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:
1. –°–æ–±–µ—Ä–µ—Ç Next.js –ø—Ä–æ–µ–∫—Ç (`npm run build`)
2. –°–æ–∑–¥–∞—Å—Ç standalone —Å–±–æ—Ä–∫—É –≤ `.next/standalone/`
3. –°–∫–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –≤ `dist/`
4. –î–æ–±–∞–≤–∏—Ç `start.sh` –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

```bash
cd dist
PORT=3000 node server.js
```

–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000

---

## üì§ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê—Ä—Ö–∏–≤ –∏ SCP

```bash
cd dist
tar -czf oyna-website.tar.gz *
scp oyna-website.tar.gz user@your-server:/var/www/oynapp.kz/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
ssh user@your-server
cd /var/www/oynapp.kz/
tar -xzf oyna-website.tar.gz
node server.js
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
npm install -g pm2
cd /var/www/oynapp.kz/
pm2 start server.js --name oyna-website
pm2 save
pm2 startup
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: Plesk

1. –ó–∞–≥—Ä—É–∑–∏—Ç—å `dist/*` —á–µ—Ä–µ–∑ File Manager
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   - **Application Mode:** Production
   - **Application Startup File:** `server.js`
   - **Application Root:** `/var/www/oynapp.kz/`

---

## üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env.production` –≤ –ø–∞–ø–∫–µ `dist/`:

```env
NODE_ENV=production
PORT=3000
HOSTNAME=0.0.0.0
NEXT_PUBLIC_SITE_URL=https://oynapp.kz

# Email –¥–ª—è —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
EMAIL_FROM=noreply@oynapp.kz
EMAIL_TO=info@oynapp.kz

# Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_CHAT_ID=your-chat-id
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤

| –ü–∞–ø–∫–∞ | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|--------|----------|
| **dist/** | **78 MB** | ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é |
| node_modules/ | 511 MB | –í—Å–µ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
| .next/ | 86 MB | –ò—Å—Ö–æ–¥–Ω–∞—è —Å–±–æ—Ä–∫–∞ |

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** standalone —Ä–µ–∂–∏–º —É–º–µ–Ω—å—à–∏–ª —Ä–∞–∑–º–µ—Ä –≤ **6.5 —Ä–∞–∑**!

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –±–∏–ª–¥–æ–º
- **–ü—Ä–æ–±–ª–µ–º–∞:** TypeScript –æ—à–∏–±–∫–∞ –ø—Ä–∏ `npm run build`
- **–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –¥–ª—è `nodemailer`
- **–†–µ—à–µ–Ω–∏–µ:** `npm install --save-dev @types/nodemailer --legacy-peer-deps`

### 2. –ù–∞—Å—Ç—Ä–æ–µ–Ω standalone output
- **–§–∞–π–ª:** `next.config.ts`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** `output: "standalone"`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞

### 3. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
- **–§–∞–π–ª:** `scripts/prepare-deploy.sh`
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ standalone —Å–±–æ—Ä–∫–∏
  - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ static —Ñ–∞–π–ª–æ–≤
  - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ public —Ä–µ—Å—É—Ä—Å–æ–≤
  - –°–æ–∑–¥–∞–Ω–∏–µ `start.sh` –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤ package.json
- **–ö–æ–º–∞–Ω–¥–∞:** `npm run build:deploy`
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ë–∏–ª–¥ + –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ dist –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ

### 5. –û–±–Ω–æ–≤–ª–µ–Ω .gitignore
- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** `/dist`
- **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –±–æ–ª—å—à–∏–µ –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã

### 6. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **QUICK_DEPLOY.md** - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- **DEPLOYMENT_DIST.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å Nginx, SSL, PM2
- **BUILD_FIX.md** - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∏–ª–¥–æ–º
- **dist/DEPLOY_README.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ —Å–±–æ—Ä–∫–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ

```bash
cd dist
PORT=3003 NODE_ENV=production node server.js
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
HTTP/1.1 200 OK
Cache-Control: public, s-maxage=3600, stale-while-revalidate=7200
Content-Type: text/html; charset=utf-8
Content-Length: 72003
```

‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è  
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è  
‚úÖ API routes —Ä–∞–±–æ—Ç–∞—é—Ç  
‚úÖ Static —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è  

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **QUICK_DEPLOY.md** | –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (—ç—Ç–æ –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ!) |
| **DEPLOYMENT_DIST.md** | –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å Nginx, SSL, PM2 |
| **BUILD_FIX.md** | –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å TypeScript –±–∏–ª–¥–æ–º |
| **dist/DEPLOY_README.md** | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –≥–æ—Ç–æ–≤–æ–π —Å–±–æ—Ä–∫–∏ |
| **workflow_checklist.txt** | –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á |

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**
   ```bash
   scp -r dist/* user@server:/var/www/oynapp.kz/
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - –°–æ–∑–¥–∞—Ç—å `.env.production` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å PM2**
   - –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx**
   - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø–æ—Ä—Ç 3000
   - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS**
   - –£–∫–∞–∑–∞—Ç—å –¥–æ–º–µ–Ω –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞

6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - PM2 dashboard
   - –õ–æ–≥–∏: `pm2 logs oyna-website`

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Node.js: `node --version` (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 20+)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç: `netstat -tulpn | grep 3000`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `pm2 logs oyna-website`

**–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è?**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `ls -la dist/public/images/`
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å ~20+ —Ñ–∞–π–ª–æ–≤

**502 Bad Gateway –≤ Nginx?**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `curl http://localhost:3000`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: `pm2 restart oyna-website`

---

## üéâ –ò—Ç–æ–≥

‚úÖ –ü–∞–ø–∫–∞ **dist/** –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é  
‚úÖ –†–∞–∑–º–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω: **78 MB**  
‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è  
‚úÖ –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã  

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** ~5-10 –º–∏–Ω—É—Ç  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞:** Node.js 20+  
**–•–æ—Å—Ç–∏–Ω–≥:** –õ—é–±–æ–π —Å Node.js (Plesk, VPS, Dedicated)  

üöÄ **–ì–æ—Ç–æ–≤–æ –∫ production!**

