# üöÄ –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

## ‚úÖ –ü–∞–ø–∫–∞ –¥–ª—è –¥–µ–ø–ª–æ—è –≥–æ—Ç–æ–≤–∞!

–ü–∞–ø–∫–∞ **`dist/`** —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é standalone —Å–±–æ—Ä–∫—É Next.js, –≥–æ—Ç–æ–≤—É—é –∫ –¥–µ–ø–ª–æ—é –Ω–∞ –ª—é–±–æ–π —Ö–æ—Å—Ç–∏–Ω–≥ —Å Node.js 20+.

---

## üì¶ –°–æ–∑–¥–∞–Ω–∏–µ —Å–±–æ—Ä–∫–∏

### –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞:

```bash
source setup-dev.sh
npm run build:deploy
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–∞–ø–∫–∞ **`dist/`** —Ä–∞–∑–º–µ—Ä–æ–º ~78 MB

---

## üìÇ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ dist/

```
dist/
‚îú‚îÄ‚îÄ server.js              # Next.js —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ package.json           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ node_modules/          # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (~50 MB)
‚îú‚îÄ‚îÄ .next/                 # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ server/           # –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ static/           # Static assets
‚îú‚îÄ‚îÄ public/               # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, favicon –∏ —Ç.–¥.
‚îú‚îÄ‚îÄ start.sh              # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ DEPLOY_README.md      # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
```

---

## üéØ 3 —Å–ø–æ—Å–æ–±–∞ –¥–µ–ø–ª–æ—è

### 1Ô∏è‚É£ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ –∞—Ä—Ö–∏–≤

```bash
# –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤
cd dist
tar -czf oyna-website.tar.gz *

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp oyna-website.tar.gz user@your-server:/var/www/oynapp.kz/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
ssh user@your-server
cd /var/www/oynapp.kz/
tar -xzf oyna-website.tar.gz
rm oyna-website.tar.gz

# –ó–∞–ø—É—Å—Ç–∏—Ç—å (—Ç—Ä–µ–±—É–µ—Ç—Å—è Node.js 20+)
PORT=3000 node server.js
```

### 2Ô∏è‚É£ –ß–µ—Ä–µ–∑ Plesk File Manager

1. –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É `dist`
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ Plesk File Manager –≤ `/var/www/oynapp.kz/`
3. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Plesk
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Plesk:
   - Application Mode: Production
   - Application Startup File: `server.js`
   - Application Root: `/var/www/oynapp.kz/`

### 3Ô∏è‚É£ –° PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PM2
npm install -g pm2

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
cd /var/www/oynapp.kz/
pm2 start server.js --name oyna-website
pm2 save
pm2 startup
```

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env.production` –≤ –ø–∞–ø–∫–µ `dist/`:

```env
NODE_ENV=production
PORT=3000
HOSTNAME=0.0.0.0
NEXT_PUBLIC_SITE_URL=https://oynapp.kz

# Email (–¥–ª—è —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏)
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USER=your-email@example.com
EMAIL_PASS=your-password
EMAIL_FROM=noreply@oynapp.kz
EMAIL_TO=info@oynapp.kz
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
cd dist
PORT=3000 node server.js
# –û—Ç–∫—Ä—ã—Ç—å: http://localhost:3000

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
curl http://localhost:3000
# –ò–ª–∏
curl https://oynapp.kz
```

---

## üìù –í–∞–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `npm run build:deploy` | –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É dist –¥–ª—è –¥–µ–ø–ª–æ—è |
| `./scripts/prepare-deploy.sh` | –¢–æ–ª—å–∫–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å dist (–±–µ–∑ –±–∏–ª–¥–∞) |
| `PORT=3000 node server.js` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞–ø—Ä—è–º—É—é |
| `pm2 start server.js --name oyna-website` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å PM2 |
| `pm2 logs oyna-website` | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ |
| `pm2 restart oyna-website` | –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å |

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Node.js –≤–µ—Ä—Å–∏—é (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 20+)
node --version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
netstat -tulpn | grep 3000
```

**502 Bad Gateway?**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Next.js –∑–∞–ø—É—â–µ–Ω
curl http://localhost:3000

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart oyna-website
```

**–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è?**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–ø–∫—É public
ls -la public/images/
```

---

## üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **DEPLOYMENT_DIST.md** - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é —Å Nginx, SSL –∏ —Ç.–¥.
- **dist/DEPLOY_README.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ —Å–±–æ—Ä–∫–∏
- **BUILD_FIX.md** - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –±–∏–ª–¥–æ–º

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–∞–ø–∫–∞ `dist/` –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é –Ω–∞:
- ‚úÖ Plesk —Ö–æ—Å—Ç–∏–Ω–≥
- ‚úÖ VPS / Dedicated —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –õ—é–±–æ–π —Ö–æ—Å—Ç–∏–Ω–≥ —Å Node.js 20+

**–†–∞–∑–º–µ—Ä:** ~78 MB  
**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** ~5-10 –º–∏–Ω—É—Ç  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** Node.js 20+ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ  

